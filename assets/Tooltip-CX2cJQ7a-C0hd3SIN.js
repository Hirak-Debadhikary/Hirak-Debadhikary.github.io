import{r as u,i as Je,R as De,g as Ne,j as K,a as V,b as Fe,c as ae,u as et,d as tt,e as ue,f as nt,h as rt,k as ot,l as Re,m as st,o as it,s as at,n as ut,p as ct}from"./index-DKUA5nEk.js";/*!
* tabbable 6.4.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var lt=["input:not([inert]):not([inert] *)","select:not([inert]):not([inert] *)","textarea:not([inert]):not([inert] *)","a[href]:not([inert]):not([inert] *)","button:not([inert]):not([inert] *)","[tabindex]:not(slot):not([inert]):not([inert] *)","audio[controls]:not([inert]):not([inert] *)","video[controls]:not([inert]):not([inert] *)",'[contenteditable]:not([contenteditable="false"]):not([inert]):not([inert] *)',"details>summary:first-of-type:not([inert]):not([inert] *)","details:not([inert]):not([inert] *)"],me=lt.join(","),ke=typeof Element>"u",J=ke?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,te=!ke&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},ne=function(e,n){var r;n===void 0&&(n=!0);var o=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=o===""||o==="true",s=i||n&&e&&(typeof e.closest=="function"?e.closest("[inert]"):ne(e.parentNode));return s},ft=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},dt=function(e,n,r){if(ne(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(me));return n&&J.call(e,me)&&o.unshift(e),o=o.filter(r),o},pe=function(e,n,r){for(var o=[],i=Array.from(e);i.length;){var s=i.shift();if(!ne(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),c=a.length?a:s.children,l=pe(c,!0,r);r.flatten?o.push.apply(o,l):o.push({scopeParent:s,candidates:l})}else{var d=J.call(s,me);d&&r.filter(s)&&(n||!e.includes(s))&&o.push(s);var v=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),h=!ne(v,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(v&&h){var m=pe(v===!0?s.children:v.children,!0,r);r.flatten?o.push.apply(o,m):o.push({scopeParent:s,candidates:m})}else i.unshift.apply(i,s.children)}}return o},je=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},_e=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||ft(e))&&!je(e)?0:e.tabIndex},vt=function(e,n){var r=_e(e);return r<0&&n&&!je(e)?0:r},mt=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},Ke=function(e){return e.tagName==="INPUT"},pt=function(e){return Ke(e)&&e.type==="hidden"},gt=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},bt=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},ht=function(e){if(!e.name)return!0;var n=e.form||te(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(e.name));else try{o=r(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var i=bt(o,e.form);return!i||i===e},Rt=function(e){return Ke(e)&&e.type==="radio"},yt=function(e){return Rt(e)&&!ht(e)},Et=function(e){var n,r=e&&te(e),o=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var s,a,c;for(i=!!((s=o)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(o)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!i&&o;){var l,d,v;r=te(o),o=(l=r)===null||l===void 0?void 0:l.host,i=!!((d=o)!==null&&d!==void 0&&(v=d.ownerDocument)!==null&&v!==void 0&&v.contains(o))}}return i},ye=function(e){var n=e.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},xt=function(e,n){var r=n.displayCheck,o=n.getShadowRoot;if(r==="full-native"&&"checkVisibility"in e){var i=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!i}if(getComputedStyle(e).visibility==="hidden")return!0;var s=J.call(e,"details>summary:first-of-type"),a=s?e.parentElement:e;if(J.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof o=="function"){for(var c=e;e;){var l=e.parentElement,d=te(e);if(l&&!l.shadowRoot&&o(l)===!0)return ye(e);e.assignedSlot?e=e.assignedSlot:!l&&d!==e.ownerDocument?e=d.host:e=l}e=c}if(Et(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return ye(e);return!1},St=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return J.call(n,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}n=n.parentElement}return!1},wt=function(e,n){return!(n.disabled||pt(n)||xt(n,e)||gt(n)||St(n))},Ee=function(e,n){return!(yt(n)||_e(n)<0||!wt(e,n))},Ct=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},Be=function(e){var n=[],r=[];return e.forEach(function(o,i){var s=!!o.scopeParent,a=s?o.scopeParent:o,c=vt(a,s),l=s?Be(o.candidates):a;c===0?s?n.push.apply(n,l):n.push(a):r.push({documentOrder:i,tabIndex:c,item:o,isScope:s,content:l})}),r.sort(mt).reduce(function(o,i){return i.isScope?o.push.apply(o,i.content):o.push(i.content),o},[]).concat(n)},We=function(e,n){n=n||{};var r;return n.getShadowRoot?r=pe([e],n.includeContainer,{filter:Ee.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:Ct}):r=dt(e,n.includeContainer,Ee.bind(null,n)),Be(r)};function Tt(){return/apple/i.test(navigator.vendor)}const xe="data-floating-ui-focusable";function It(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function re(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&Je(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function Q(t){return"composedPath"in t?t.composedPath()[0]:t.target}function ce(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function Pt(t){return t.matches("html,body")}function q(t){return(t==null?void 0:t.ownerDocument)||document}function Mt(t){return t?t.hasAttribute(xe)?t:t.querySelector("["+xe+"]")||t:null}function ee(t,e,n){return n===void 0&&(n=!0),t.filter(o=>{var i;return o.parentId===e&&(!n||((i=o.context)==null?void 0:i.open))}).flatMap(o=>[o,...ee(t,o.id,n)])}function Lt(t){return"nativeEvent"in t}function ge(t,e){const n=["mouse","pen"];return n.push("",void 0),n.includes(t)}var At=typeof document<"u",Ot=function(){},$=At?u.useLayoutEffect:Ot;const Dt={...De};function G(t){const e=u.useRef(t);return $(()=>{e.current=t}),e}const Nt=Dt.useInsertionEffect,Ft=Nt||(t=>t());function H(t){const e=u.useRef(()=>{});return Ft(()=>{e.current=t}),u.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}const $e=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Ve(t,e){const n=We(t,$e()),r=n.length;if(r===0)return;const o=It(q(t)),i=n.indexOf(o),s=i===-1?e===1?0:r-1:i+e;return n[s]}function kt(t){return Ve(q(t).body,1)||t}function jt(t){return Ve(q(t).body,-1)||t}function le(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!re(n,r)}function _t(t){We(t,$e()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function Se(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const Kt="data-floating-ui-focusable",we="active",Ce="selected",Bt={...De};let Te=!1,Wt=0;const Ie=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Wt++;function $t(){const[t,e]=u.useState(()=>Te?Ie():void 0);return $(()=>{t==null&&e(Ie())},[]),u.useEffect(()=>{Te=!0},[]),t}const Vt=Bt.useId,oe=Vt||$t,Yt=u.forwardRef(function(e,n){const{context:{placement:r,elements:{floating:o},middlewareData:{arrow:i,shift:s}},width:a=14,height:c=7,tipRadius:l=0,strokeWidth:d=0,staticOffset:v,stroke:h,d:m,style:{transform:C,...p}={},...R}=e,S=oe(),[E,y]=u.useState(!1);if($(()=>{if(!o)return;Ne(o).direction==="rtl"&&y(!0)},[o]),!o)return null;const[T,L]=r.split("-"),N=T==="top"||T==="bottom";let A=v;(N&&s!=null&&s.x||!N&&s!=null&&s.y)&&(A=null);const P=d*2,O=P/2,_=a/2*(l/-8+1),Y=c/2*l/4,k=!!m,W=A&&L==="end"?"bottom":"top";let b=A&&L==="end"?"right":"left";A&&E&&(b=L==="end"?"left":"right");const M=(i==null?void 0:i.x)!=null?A||i.x:"",F=(i==null?void 0:i.y)!=null?A||i.y:"",g=m||"M0,0"+(" H"+a)+(" L"+(a-_)+","+(c-Y))+(" Q"+a/2+","+c+" "+_+","+(c-Y))+" Z",f={top:k?"rotate(180deg)":"",left:k?"rotate(90deg)":"rotate(-90deg)",bottom:k?"":"rotate(180deg)",right:k?"rotate(-90deg)":"rotate(90deg)"}[T];return K.jsxs("svg",{...R,"aria-hidden":!0,ref:n,width:k?a:a+P,height:a,viewBox:"0 0 "+a+" "+(c>a?c:a),style:{position:"absolute",pointerEvents:"none",[b]:M,[W]:F,[T]:N||k?"100%":"calc(100% - "+P/2+"px)",transform:[f,C].filter(x=>!!x).join(" "),...p},children:[P>0&&K.jsx("path",{clipPath:"url(#"+S+")",fill:"none",stroke:h,strokeWidth:P+(m?0:1),d:g}),K.jsx("path",{stroke:P&&!m?R.fill:"none",d:g}),K.jsx("clipPath",{id:S,children:K.jsx("rect",{x:-O,y:O*(k?-1:1),width:a+P,height:a})})]})});function Ut(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(o=>o(n))},on(e,n){t.has(e)||t.set(e,new Set),t.get(e).add(n)},off(e,n){var r;(r=t.get(e))==null||r.delete(n)}}}const Ht=u.createContext(null),Xt=u.createContext(null),be=()=>{var t;return((t=u.useContext(Ht))==null?void 0:t.id)||null},he=()=>u.useContext(Xt);function se(t){return"data-floating-ui-"+t}function U(t){t.current!==-1&&(clearTimeout(t.current),t.current=-1)}const Pe=se("safe-polygon");function fe(t,e,n){if(n&&!ge(n))return 0;if(typeof t=="number")return t;if(typeof t=="function"){const r=t();return typeof r=="number"?r:r==null?void 0:r[e]}return t==null?void 0:t[e]}function de(t){return typeof t=="function"?t():t}function qt(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:o,events:i,elements:s}=t,{enabled:a=!0,delay:c=0,handleClose:l=null,mouseOnly:d=!1,restMs:v=0,move:h=!0}=e,m=he(),C=be(),p=G(l),R=G(c),S=G(n),E=G(v),y=u.useRef(),T=u.useRef(-1),L=u.useRef(),N=u.useRef(-1),A=u.useRef(!0),P=u.useRef(!1),O=u.useRef(()=>{}),_=u.useRef(!1),Y=H(()=>{var g;const f=(g=o.current.openEvent)==null?void 0:g.type;return(f==null?void 0:f.includes("mouse"))&&f!=="mousedown"});u.useEffect(()=>{if(!a)return;function g(f){let{open:x}=f;x||(U(T),U(N),A.current=!0,_.current=!1)}return i.on("openchange",g),()=>{i.off("openchange",g)}},[a,i]),u.useEffect(()=>{if(!a||!p.current||!n)return;function g(x){Y()&&r(!1,x,"hover")}const f=q(s.floating).documentElement;return f.addEventListener("mouseleave",g),()=>{f.removeEventListener("mouseleave",g)}},[s.floating,n,r,a,p,Y]);const k=u.useCallback(function(g,f,x){f===void 0&&(f=!0),x===void 0&&(x="hover");const I=fe(R.current,"close",y.current);I&&!L.current?(U(T),T.current=window.setTimeout(()=>r(!1,g,x),I)):f&&(U(T),r(!1,g,x))},[R,r]),W=H(()=>{O.current(),L.current=void 0}),b=H(()=>{if(P.current){const g=q(s.floating).body;g.style.pointerEvents="",g.removeAttribute(Pe),P.current=!1}}),M=H(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);u.useEffect(()=>{if(!a)return;function g(w){if(U(T),A.current=!1,d&&!ge(y.current)||de(E.current)>0&&!fe(R.current,"open"))return;const D=fe(R.current,"open",y.current);D?T.current=window.setTimeout(()=>{S.current||r(!0,w,"hover")},D):n||r(!0,w,"hover")}function f(w){if(M()){b();return}O.current();const D=q(s.floating);if(U(N),_.current=!1,p.current&&o.current.floatingContext){n||U(T),L.current=p.current({...o.current.floatingContext,tree:m,x:w.clientX,y:w.clientY,onClose(){b(),W(),M()||k(w,!0,"safe-polygon")}});const j=L.current;D.addEventListener("mousemove",j),O.current=()=>{D.removeEventListener("mousemove",j)};return}(y.current==="touch"?!re(s.floating,w.relatedTarget):!0)&&k(w)}function x(w){M()||o.current.floatingContext&&(p.current==null||p.current({...o.current.floatingContext,tree:m,x:w.clientX,y:w.clientY,onClose(){b(),W(),M()||k(w)}})(w))}function I(){U(T)}function B(w){M()||k(w,!1)}if(V(s.domReference)){const w=s.domReference,D=s.floating;return n&&w.addEventListener("mouseleave",x),h&&w.addEventListener("mousemove",g,{once:!0}),w.addEventListener("mouseenter",g),w.addEventListener("mouseleave",f),D&&(D.addEventListener("mouseleave",x),D.addEventListener("mouseenter",I),D.addEventListener("mouseleave",B)),()=>{n&&w.removeEventListener("mouseleave",x),h&&w.removeEventListener("mousemove",g),w.removeEventListener("mouseenter",g),w.removeEventListener("mouseleave",f),D&&(D.removeEventListener("mouseleave",x),D.removeEventListener("mouseenter",I),D.removeEventListener("mouseleave",B))}}},[s,a,t,d,h,k,W,b,r,n,S,m,R,p,o,M,E]),$(()=>{var g;if(a&&n&&(g=p.current)!=null&&(g=g.__options)!=null&&g.blockPointerEvents&&Y()){P.current=!0;const x=s.floating;if(V(s.domReference)&&x){var f;const I=q(s.floating).body;I.setAttribute(Pe,"");const B=s.domReference,w=m==null||(f=m.nodesRef.current.find(D=>D.id===C))==null||(f=f.context)==null?void 0:f.elements.floating;return w&&(w.style.pointerEvents=""),I.style.pointerEvents="none",B.style.pointerEvents="auto",x.style.pointerEvents="auto",()=>{I.style.pointerEvents="",B.style.pointerEvents="",x.style.pointerEvents=""}}}},[a,n,C,s,m,p,Y]),$(()=>{n||(y.current=void 0,_.current=!1,W(),b())},[n,W,b]),u.useEffect(()=>()=>{W(),U(T),U(N),b()},[a,s.domReference,W,b]);const F=u.useMemo(()=>{function g(f){y.current=f.pointerType}return{onPointerDown:g,onPointerEnter:g,onMouseMove(f){const{nativeEvent:x}=f;function I(){!A.current&&!S.current&&r(!0,x,"hover")}d&&!ge(y.current)||n||de(E.current)===0||_.current&&f.movementX**2+f.movementY**2<2||(U(N),y.current==="touch"?I():(_.current=!0,N.current=window.setTimeout(I,de(E.current))))}}},[d,r,n,S,E]);return u.useMemo(()=>a?{reference:F}:{},[a,F])}const Ye={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},Me=u.forwardRef(function(e,n){const[r,o]=u.useState();$(()=>{Tt()&&o("button")},[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[se("focus-guard")]:"",style:Ye};return K.jsx("span",{...e,...i})}),Ue=u.createContext(null),Le=se("portal");function Gt(t){t===void 0&&(t={});const{id:e,root:n}=t,r=oe(),o=zt(),[i,s]=u.useState(null),a=u.useRef(null);return $(()=>()=>{i==null||i.remove(),queueMicrotask(()=>{a.current=null})},[i]),$(()=>{if(!r||a.current)return;const c=e?document.getElementById(e):null;if(!c)return;const l=document.createElement("div");l.id=r,l.setAttribute(Le,""),c.appendChild(l),a.current=l,s(l)},[e,r]),$(()=>{if(n===null||!r||a.current)return;let c=n||(o==null?void 0:o.portalNode);c&&!tt(c)&&(c=c.current),c=c||document.body;let l=null;e&&(l=document.createElement("div"),l.id=e,c.appendChild(l));const d=document.createElement("div");d.id=r,d.setAttribute(Le,""),c=l||c,c.appendChild(d),a.current=d,s(d)},[e,n,r,o]),i}function Zt(t){const{children:e,id:n,root:r,preserveTabOrder:o=!0}=t,i=Gt({id:n,root:r}),[s,a]=u.useState(null),c=u.useRef(null),l=u.useRef(null),d=u.useRef(null),v=u.useRef(null),h=s==null?void 0:s.modal,m=s==null?void 0:s.open,C=!!s&&!s.modal&&s.open&&o&&!!(r||i);return u.useEffect(()=>{if(!i||!o||h)return;function p(R){i&&le(R)&&(R.type==="focusin"?Se:_t)(i)}return i.addEventListener("focusin",p,!0),i.addEventListener("focusout",p,!0),()=>{i.removeEventListener("focusin",p,!0),i.removeEventListener("focusout",p,!0)}},[i,o,h]),u.useEffect(()=>{i&&(m||Se(i))},[m,i]),K.jsxs(Ue.Provider,{value:u.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:c,afterOutsideRef:l,beforeInsideRef:d,afterInsideRef:v,portalNode:i,setFocusManagerState:a}),[o,i]),children:[C&&i&&K.jsx(Me,{"data-type":"outside",ref:c,onFocus:p=>{if(le(p,i)){var R;(R=d.current)==null||R.focus()}else{const S=s?s.domReference:null,E=jt(S);E==null||E.focus()}}}),C&&i&&K.jsx("span",{"aria-owns":i.id,style:Ye}),i&&Fe.createPortal(e,i),C&&i&&K.jsx(Me,{"data-type":"outside",ref:l,onFocus:p=>{if(le(p,i)){var R;(R=v.current)==null||R.focus()}else{const S=s?s.domReference:null,E=kt(S);E==null||E.focus(),s!=null&&s.closeOnFocusOut&&(s==null||s.onOpenChange(!1,p.nativeEvent,"focus-out"))}}})]})}const zt=()=>u.useContext(Ue),Qt={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Jt={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Ae=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function en(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:o,dataRef:i}=t,{enabled:s=!0,escapeKey:a=!0,outsidePress:c=!0,outsidePressEvent:l="pointerdown",referencePress:d=!1,referencePressEvent:v="pointerdown",ancestorScroll:h=!1,bubbles:m,capture:C}=e,p=he(),R=H(typeof c=="function"?c:()=>!1),S=typeof c=="function"?R:c,E=u.useRef(!1),{escapeKey:y,outsidePress:T}=Ae(m),{escapeKey:L,outsidePress:N}=Ae(C),A=u.useRef(!1),P=H(b=>{var M;if(!n||!s||!a||b.key!=="Escape"||A.current)return;const F=(M=i.current.floatingContext)==null?void 0:M.nodeId,g=p?ee(p.nodesRef.current,F):[];if(!y&&(b.stopPropagation(),g.length>0)){let f=!0;if(g.forEach(x=>{var I;if((I=x.context)!=null&&I.open&&!x.context.dataRef.current.__escapeKeyBubbles){f=!1;return}}),!f)return}r(!1,Lt(b)?b.nativeEvent:b,"escape-key")}),O=H(b=>{var M;const F=()=>{var g;P(b),(g=Q(b))==null||g.removeEventListener("keydown",F)};(M=Q(b))==null||M.addEventListener("keydown",F)}),_=H(b=>{var M;const F=i.current.insideReactTree;i.current.insideReactTree=!1;const g=E.current;if(E.current=!1,l==="click"&&g||F||typeof S=="function"&&!S(b))return;const f=Q(b),x="["+se("inert")+"]",I=q(o.floating).querySelectorAll(x);let B=V(f)?f:null;for(;B&&!ue(B);){const j=nt(B);if(ue(j)||!V(j))break;B=j}if(I.length&&V(f)&&!Pt(f)&&!re(f,o.floating)&&Array.from(I).every(j=>!re(B,j)))return;if(rt(f)&&W){const j=ue(f),X=Ne(f),z=/auto|scroll/,He=j||z.test(X.overflowX),Xe=j||z.test(X.overflowY),qe=He&&f.clientWidth>0&&f.scrollWidth>f.clientWidth,Ge=Xe&&f.clientHeight>0&&f.scrollHeight>f.clientHeight,Ze=X.direction==="rtl",ze=Ge&&(Ze?b.offsetX<=f.offsetWidth-f.clientWidth:b.offsetX>f.clientWidth),Qe=qe&&b.offsetY>f.clientHeight;if(ze||Qe)return}const w=(M=i.current.floatingContext)==null?void 0:M.nodeId,D=p&&ee(p.nodesRef.current,w).some(j=>{var X;return ce(b,(X=j.context)==null?void 0:X.elements.floating)});if(ce(b,o.floating)||ce(b,o.domReference)||D)return;const ie=p?ee(p.nodesRef.current,w):[];if(ie.length>0){let j=!0;if(ie.forEach(X=>{var z;if((z=X.context)!=null&&z.open&&!X.context.dataRef.current.__outsidePressBubbles){j=!1;return}}),!j)return}r(!1,b,"outside-press")}),Y=H(b=>{var M;const F=()=>{var g;_(b),(g=Q(b))==null||g.removeEventListener(l,F)};(M=Q(b))==null||M.addEventListener(l,F)});u.useEffect(()=>{if(!n||!s)return;i.current.__escapeKeyBubbles=y,i.current.__outsidePressBubbles=T;let b=-1;function M(I){r(!1,I,"ancestor-scroll")}function F(){window.clearTimeout(b),A.current=!0}function g(){b=window.setTimeout(()=>{A.current=!1},ot()?5:0)}const f=q(o.floating);a&&(f.addEventListener("keydown",L?O:P,L),f.addEventListener("compositionstart",F),f.addEventListener("compositionend",g)),S&&f.addEventListener(l,N?Y:_,N);let x=[];return h&&(V(o.domReference)&&(x=ae(o.domReference)),V(o.floating)&&(x=x.concat(ae(o.floating))),!V(o.reference)&&o.reference&&o.reference.contextElement&&(x=x.concat(ae(o.reference.contextElement)))),x=x.filter(I=>{var B;return I!==((B=f.defaultView)==null?void 0:B.visualViewport)}),x.forEach(I=>{I.addEventListener("scroll",M,{passive:!0})}),()=>{a&&(f.removeEventListener("keydown",L?O:P,L),f.removeEventListener("compositionstart",F),f.removeEventListener("compositionend",g)),S&&f.removeEventListener(l,N?Y:_,N),x.forEach(I=>{I.removeEventListener("scroll",M)}),window.clearTimeout(b)}},[i,o,a,S,l,n,r,h,s,y,T,P,L,O,_,N,Y]),u.useEffect(()=>{i.current.insideReactTree=!1},[i,S,l]);const k=u.useMemo(()=>({onKeyDown:P,...d&&{[Qt[v]]:b=>{r(!1,b.nativeEvent,"reference-press")},...v!=="click"&&{onClick(b){r(!1,b.nativeEvent,"reference-press")}}}}),[P,r,d,v]),W=u.useMemo(()=>({onKeyDown:P,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[Jt[l]]:()=>{i.current.insideReactTree=!0}}),[P,l,i]);return u.useMemo(()=>s?{reference:k,floating:W}:{},[s,k,W])}function tn(t){const{open:e=!1,onOpenChange:n,elements:r}=t,o=oe(),i=u.useRef({}),[s]=u.useState(()=>Ut()),a=be()!=null,[c,l]=u.useState(r.reference),d=H((m,C,p)=>{i.current.openEvent=m?C:void 0,s.emit("openchange",{open:m,event:C,reason:p,nested:a}),n==null||n(m,C,p)}),v=u.useMemo(()=>({setPositionReference:l}),[]),h=u.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return u.useMemo(()=>({dataRef:i,open:e,onOpenChange:d,elements:h,events:s,floatingId:o,refs:v}),[e,d,h,s,o,v])}function nn(t){t===void 0&&(t={});const{nodeId:e}=t,n=tn({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,o=r.elements,[i,s]=u.useState(null),[a,c]=u.useState(null),d=(o==null?void 0:o.domReference)||i,v=u.useRef(null),h=he();$(()=>{d&&(v.current=d)},[d]);const m=et({...t,elements:{...o,...a&&{reference:a}}}),C=u.useCallback(y=>{const T=V(y)?{getBoundingClientRect:()=>y.getBoundingClientRect(),getClientRects:()=>y.getClientRects(),contextElement:y}:y;c(T),m.refs.setReference(T)},[m.refs]),p=u.useCallback(y=>{(V(y)||y===null)&&(v.current=y,s(y)),(V(m.refs.reference.current)||m.refs.reference.current===null||y!==null&&!V(y))&&m.refs.setReference(y)},[m.refs]),R=u.useMemo(()=>({...m.refs,setReference:p,setPositionReference:C,domReference:v}),[m.refs,p,C]),S=u.useMemo(()=>({...m.elements,domReference:d}),[m.elements,d]),E=u.useMemo(()=>({...m,...r,refs:R,elements:S,nodeId:e}),[m,R,S,e,r]);return $(()=>{r.dataRef.current.floatingContext=E;const y=h==null?void 0:h.nodesRef.current.find(T=>T.id===e);y&&(y.context=E)}),u.useMemo(()=>({...m,context:E,refs:R,elements:S}),[m,R,S,E])}function ve(t,e,n){const r=new Map,o=n==="item";let i=t;if(o&&t){const{[we]:s,[Ce]:a,...c}=t;i=c}return{...n==="floating"&&{tabIndex:-1,[Kt]:""},...i,...e.map(s=>{const a=s?s[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((s,a)=>(a&&Object.entries(a).forEach(c=>{let[l,d]=c;if(!(o&&[we,Ce].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof d=="function"){var v;(v=r.get(l))==null||v.push(d),s[l]=function(){for(var h,m=arguments.length,C=new Array(m),p=0;p<m;p++)C[p]=arguments[p];return(h=r.get(l))==null?void 0:h.map(R=>R(...C)).find(R=>R!==void 0)}}}else s[l]=d}),s),{})}}function rn(t){t===void 0&&(t=[]);const e=t.map(a=>a==null?void 0:a.reference),n=t.map(a=>a==null?void 0:a.floating),r=t.map(a=>a==null?void 0:a.item),o=u.useCallback(a=>ve(a,t,"reference"),e),i=u.useCallback(a=>ve(a,t,"floating"),n),s=u.useCallback(a=>ve(a,t,"item"),r);return u.useMemo(()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:s}),[o,i,s])}const on=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function sn(t,e){var n,r;e===void 0&&(e={});const{open:o,elements:i,floatingId:s}=t,{enabled:a=!0,role:c="dialog"}=e,l=oe(),d=((n=i.domReference)==null?void 0:n.id)||l,v=u.useMemo(()=>{var E;return((E=Mt(i.floating))==null?void 0:E.id)||s},[i.floating,s]),h=(r=on.get(c))!=null?r:c,C=be()!=null,p=u.useMemo(()=>h==="tooltip"||c==="label"?{["aria-"+(c==="label"?"labelledby":"describedby")]:o?v:void 0}:{"aria-expanded":o?"true":"false","aria-haspopup":h==="alertdialog"?"dialog":h,"aria-controls":o?v:void 0,...h==="listbox"&&{role:"combobox"},...h==="menu"&&{id:d},...h==="menu"&&C&&{role:"menuitem"},...c==="select"&&{"aria-autocomplete":"none"},...c==="combobox"&&{"aria-autocomplete":"list"}},[h,v,C,o,d,c]),R=u.useMemo(()=>{const E={id:v,...h&&{role:h}};return h==="tooltip"||c==="label"?E:{...E,...h==="menu"&&{"aria-labelledby":d}}},[h,v,d,c]),S=u.useCallback(E=>{let{active:y,selected:T}=E;const L={role:"option",...y&&{id:v+"-fui-option"}};switch(c){case"select":case"combobox":return{...L,"aria-selected":T}}return{}},[v,c]);return u.useMemo(()=>a?{reference:p,floating:R,item:S}:{},[a,p,R,S])}const Oe=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function Z(t,e){return typeof t=="function"?t(e):t}function an(t,e){const[n,r]=u.useState(t);return t&&!n&&r(!0),u.useEffect(()=>{if(!t&&n){const o=setTimeout(()=>r(!1),e);return()=>clearTimeout(o)}},[t,n,e]),n}function un(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:o=250}=e,s=(typeof o=="number"?o:o.close)||0,[a,c]=u.useState("unmounted"),l=an(n,s);return!l&&a==="close"&&c("unmounted"),$(()=>{if(r){if(n){c("initial");const d=requestAnimationFrame(()=>{Fe.flushSync(()=>{c("open")})});return()=>{cancelAnimationFrame(d)}}c("close")}},[n,r]),{isMounted:l,status:a}}function cn(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:o,common:i,duration:s=250}=e,a=t.placement,c=a.split("-")[0],l=u.useMemo(()=>({side:c,placement:a}),[c,a]),d=typeof s=="number",v=(d?s:s.open)||0,h=(d?s:s.close)||0,[m,C]=u.useState(()=>({...Z(i,l),...Z(n,l)})),{isMounted:p,status:R}=un(t,{duration:s}),S=G(n),E=G(r),y=G(o),T=G(i);return $(()=>{const L=Z(S.current,l),N=Z(y.current,l),A=Z(T.current,l),P=Z(E.current,l)||Object.keys(L).reduce((O,_)=>(O[_]="",O),{});if(R==="initial"&&C(O=>({transitionProperty:O.transitionProperty,...A,...L})),R==="open"&&C({transitionProperty:Object.keys(P).map(Oe).join(","),transitionDuration:v+"ms",...A,...P}),R==="close"){const O=N||L;C({transitionProperty:Object.keys(O).map(Oe).join(","),transitionDuration:h+"ms",...A,...O})}},[h,y,S,E,T,v,R,l]),{isMounted:p,styles:m}}function fn({children:t,text:e,colorScheme:n,placement:r,offset:o=4,transitionStyles:i,hoverRestMs:s=150,withArrow:a=!1}){const[c,l]=u.useState(!1),d=u.useRef(null),{context:v,refs:h,floatingStyles:m}=nn({open:c,onOpenChange:l,placement:r,middleware:[st(),it(o),at({padding:8}),a?ut({element:d}):null],whileElementsMounted:ct}),C=qt(v,{restMs:s}),p=en(v),R=sn(v,{role:"tooltip"}),{getReferenceProps:S,getFloatingProps:E}=rn([C,p,R]),{isMounted:y,styles:T}=cn(v,i);return K.jsxs(K.Fragment,{children:[u.cloneElement(t,{ref:h.setReference,...S()}),K.jsx(Zt,{children:y&&K.jsxs("div",{ref:h.setFloating,className:Re("tooltip"),style:{...m,...T},"data-color-scheme":n,...E(),children:[e,a&&K.jsx(Yt,{ref:d,context:v,className:Re("tooltip-arrow")})]})})]})}export{fn as Tooltip};
